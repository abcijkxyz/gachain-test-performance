{
    "name": "Ecosystems catalog",
    "conditions": "ContractConditions(\"@1DeveloperCondition\")",
    "data": [
        {
            "Name": "default_menu",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "If(#ecosystem_id# == 1){\n    MenuItem(Title:$@1catalog_ecosystems$, Page:@1ec_list, Icon:\"icon-folder\")\n}",
            "Type": "menu"
        },
        {
            "Name": "ec_option",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "@1ecosystem_open,@1ecosystem_close,@1ecosystem_authorize",
            "Type": "app_params"
        },
        {
            "Name": "ec_payment",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "@1gac_not_required,@1gac_required",
            "Type": "app_params"
        },
        {
            "Name": "ec_type",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "@1public_org,@1business,@1finance",
            "Type": "app_params"
        },
        {
            "Name": "ec_visibility",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "@1hide,@1show",
            "Type": "app_params"
        },
        {
            "Name": "ec_filter",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "DBFind(@1applications).Where({ecosystem:1, name:\"Ecosystems catalog\"}).Columns(\"name,id\").Vars(application)\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_type, Source: src_type)\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_payment, Source: src_payment)\n\nForm(){\n    Div(row){\n        Div(col-sm-6){\n            Div(pull-right){\n                Label(Class: m0){\n                    Span(Body: LangRes(@1catalog_ecosystems_type))\n                }\n                RadioGroup(Name: Type, Source: src_type, NameColumn: name, ValueColumn: id, Value: #page_par#)\n            }\n        }\n        Div(col-sm-6){\n            Label(Class: m0){\n                Span(Body: LangRes(@1catalog_ecosystems_payment))\n            }\n            RadioGroup(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: id, Value: #sort#)\n        }\n    }\n    If(GetVar(search)==\"\"){\n        SetVar(search,)\n    }\n    Button(Body: LangRes(@1filter), Class: btn btn-primary pull-right, Page: @1ec_list, PageParams: \"sort=Val(Payment),page_par=Val(Type),search=#search#\")\n    Button(Body: LangRes(@1clear), Class: btn btn-default pull-right, Page: @1ec_list, PageParams: \"sort=0,page_par=0,search=#search#\")\n}",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "ec_hello",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "Div(mb-lg text-center){\n    $@1ecosystem$ #Name# $@1was_created_she$. $@1ec_hint$\n}\nDiv(text-center){\n    Button(Body: $@1understood$, Class: btn btn-default, Page: @1ec_list)\n}",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "ec_list",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "SetVar(this_page, @1ec_list).(this_table, @1ecosystems)\nInclude(@1pager_header)\n\nSetTitle(\"$@1catalog_ecosystems$\")\nSpan(Class: text-muted h5 m0 mb ml-lg, Body: Span(Class: ml-sm, Body: \"$@1catalog_ecosystems_desc$\"))\nIf(GetVar(EcosystemId) == \"\"){\n    SetVar(EcosystemId, #ecosystem_id#)\n}\nAddToolButton(Title: $@1catalog_ecosystems_manage_button$, Page: @1select_ecosystem, Icon: \"icon-settings\", PageParams: \"back_page=@1ec_manage,back_header=$@1catalog_ecosystems_editing$,EcosystemId=#EcosystemId#,Type=ONLY_MY\").Popup(Header: $@1ecosystem_select$, Width: \"40\")\nAddToolButton(Title: $@1create$, Page: @1ec_new, Icon: icon-plus).Popup(Header: $@1create$, Width: \"30\")\n\nIf(GetVar(sort)){\n    If(#sort#==1){\n        SetVar(payment_filter, {\"info->payment\":1})\n    }.ElseIf(#sort#==2){\n        SetVar(payment_filter, {\"info->payment\":2})\n    }\n}.Else{\n    SetVar(sort, \"0\")\n}\n\nIf(GetVar(page_par)){\n    If(#page_par#==1){\n        SetVar(type_filter, {\"info->type\":1})\n    }.ElseIf(#page_par#==2){\n        SetVar(type_filter, {\"info->type\":2})\n    }.ElseIf(#page_par#==3){\n        SetVar(type_filter, {\"info->type\":3})\n    }\n}.Else{\n    SetVar(page_par, \"0\")\n}\n\nIf(GetVar(search)!=\"\"){\n    SetVar(where, {$and: [{\"info->visibility\": 2}, GetVar(payment_filter), GetVar(type_filter), {\"name\": {$like:#search#}}]})\n}.Else{\n    SetVar(where, {$and: [{\"info->visibility\": 2}, GetVar(payment_filter), GetVar(type_filter)]}).(search,)\n}\n\nDiv(mr-lg text-right){\n    Button(Page: @1ec_filter, Class: btn bg-gray-lighter mr-sm, PageParams: \"sort=#sort#,page_par=#page_par#,search=#search#,current_page=#current_page#\", Body: Em(Class: fa fa-filter) $@1filter$).Popup(Header: $@1filter$, Width: \"30\")\n    If(Or(#page_par#>0,#sort#>0)){\n        Button(Page: #this_page#, PageParams: \"sort=0,page_par=0,search=#search#\", Class: btn bg-gray-lighter mr-sm, Body: Em(Class: fa fa-close))\n    }\n}.Style(margin-top: -28px; z-index: 1001;)\n\nDiv(list-group-item ml-lg mr-lg pt-lg){\n    SetVar(search_name, LangRes(@1ecosystem))\n    Include(@1search)\n}\n\nDBFind(@1applications).Where({ecosystem:1, name:\"Ecosystems catalog\"}).Columns(\"name,id\").Vars(application)\n\nDBFind(#this_table#, src).Where(#where#).Order({\"id\": 1}).Limit(#pager_limit#).Offset(#pager_offset#).Columns(\"id,name,info->type,info->payment,info->logo,info->status_options\").Custom(name_link){\n\n    Button(Class: btn-xs btn-link, Page: @1ec_preview, PageParams: \"view_page_id=#id#,sort=#sort#,page_par=#page_par#,search=#search#,current_page=#current_page#\"){\n        Div(){\n            Div(text-right){\n                If(#info.logo#>0){\n                    Image(Src: Binary().ById(#info.logo#)).Style(height: 30px; max-width: 45px;)\n                }.Else{\n                    Span(Class: fa icon-layers fa-2x text-default)\n                }\n            }.Style(width: 45px;)\n            Span(Class: ml h5, Body: #name#)\n        }.Style(display:flex; align-items:center;)\n    }.Popup(Header: $@1catalog_ecosystems_preview$, Width: \"40\")\n}.Custom(type){\n    If(#info.type#==1){\n        Em(Class: fa fa-lg fa-users fa-fw mr-sm)\n    }.ElseIf(#info.type#==2){\n        Em(Class: fa fa-lg fa-handshake-o fa-fw mr-sm)\n    }.ElseIf(#info.type#==3){\n        Em(Class: fa fa-lg fa-bank fa-fw mr-sm)\n    }\n    AppParam(Ecosystem: 1, App: #application_id#, Name: ec_type, Index: #info.type#)\n}.Custom(payment){\n   \n        If(#info.payment#==0){\n        Em(Body: \"$@1gac_not_required$\")\n        }.ElseIf(#info.payment#==1){\n        Em(Class: fa fa-lg fa-gift fa-fw)\n        }.ElseIf(#info.payment#==2){\n        Em(Class: fa fa-lg fa-usd fa-fw)\n        }\n    \n    AppParam(Ecosystem: 1, App: #application_id#, Name:ec_payment , Index: #info.payment#)\n}.Custom(options){\n    AppParam(Ecosystem: 1, App: #application_id#, Name:ec_option , Index: #info.status_options#)\n}.Custom(actions){\n    SetVar(ecosystem_member_id,)\n    DBFind(@1notifications).Where({\"ecosystem\": #id#, \"sender->member_id\": #key_id#, \"page_params->ecosystem_id\": #id#, closed:0}).Count(notific_count)\n    DBFind(@1keys).Where({\"ecosystem\": #id#, \"id\": #key_id#}).Vars(ecosystem_member)\n    DBFind(@1parameters).Where({\"$and\": [{\"ecosystem\": #id#}, {\"$or\": [{\"$and\": [{\"name\": \"founder_account\"},{\"value\": #key_id#}]},{\"$and\": [{\"name\": \"delegate_account\"},{\"value\": #key_id#}]}]}]}).Count(access)\n    Div(text-right button-group text-nowrap){\n        If(GetVar(access)){\n            Button(Class: icon-settings btn btn-default mh-sm, Page: @1ec_manage, PageParams: \"edit_page_id=#id#\").Popup(Header: $@1catalog_ecosystems_editing$, Width: \"50\")\n        }.ElseIf(#info.status_options#==1){\n            Button(Class: btn btn-link,Body: $@1ecosystem_entrance$,Contract: @1EcosystemOpen, Page:  #this_page#, Params: \"ecosystem_num=#id#\")\n        }.ElseIf(#info.status_options#==2){\n            \n        }.ElseIf(And(#notific_count#==0,#ecosystem_member_id#==\"\",#info.status_options#==3)){\n            Button(Class: btn btn-link, Body: $@1send_request$, Contract: @1MembershipRequest, Page: #this_page#, Params: \"ecosystem_num=#id#\")\n        }\n    }\n}.Count(count)\n\nDiv(fullscreen){\n    Div(table-responsive ml-lg mr-lg){\n        Div(list-group-item){\n            If(#count# > 0){\n                Table(src, \"$@1id$=id,$@1ecosystem$=name_link,$@1catalog_ecosystems_type$=type,$@1catalog_ecosystems_payment$=payment,$@1ecosystem_state$=options,=actions\")\n            }.Else{\n                Div(Class: text-center h4 text-muted, Body: \"$@1ecosystems$ $@1not_founded$\")\n            }                       \n        }.Style(\n            margin-top:-15px;\n            tbody > tr:nth-of-type(odd) {\n                background-color: #f8f9fc;\n            }\n        )\n    }\n}\nDiv(mt-sm ml-lg mr-sm mb-sm){\n    Include(@1pager)\n}",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "ec_manage",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "DBFind(@1applications).Where({ecosystem:1, name:\"Ecosystems catalog\"}).Columns(\"name,id\").Vars(application)\nIf(GetVar(EcosystemId) == \"\"){\n    SetVar(EcosystemId, 1)\n}\nDBFind(@1buffer_data).Columns(\"value->id,value->visibility,value->type,value->payment,value->description,value->logo,value->switch,value->conditions,value->hardware,value->email,value->phone,value->vde_page,value->vde_form,value->web_page,value->web_form\").Where({\"ecosystem\": #ecosystem_id#, \"key\": \"ecosystem_catalog_manage_form\", \"member_id\": #key_id#}).Vars(buffer)\nIf(And(#buffered#==1,#buffer_value_id#>1)){\n    SetVar(edit_page_id,#buffer_value_id#)\n}\nIf(GetVar(edit_page_id)){\n    DBFind(@1ecosystems).Where({\"id\": #edit_page_id#}).Columns(\"id,name,info->visibility,info->type,info->payment,info->logo,info->description,info->conditions,info->email,info->phone,info->hardware,info->vde_page,info->vde_form,info->web_page,info->web_form,info->status_options\").Vars(edit)\n}.Else{\n    DBFind(@1ecosystems).Where({\"id\": #EcosystemId#}).Columns(\"id,name,info->visibility,info->type,info->payment,info->logo,info->description,info->conditions,info->email,info->phone,info->hardware,info->vde_page,info->vde_form,info->web_page,info->web_form,info->status_options\").Vars(edit)\n}\nIf(#buffered#==1){\n    SetVar(edit_info_visibility,#buffer_value_visibility#)\n    SetVar(edit_info_type,#buffer_value_type#)\n    SetVar(edit_info_payment,#buffer_value_payment#)\n    SetVar(edit_info_description,#buffer_value_description#)\n    SetVar(edit_info_status_options,#buffer_value_status_options#)\n}\nIf(#uploaded#==1){\n    DBFind(@1buffer_data).Columns(\"value->binary_id\").Where({\"ecosystem\": #ecosystem_id#, \"key\": \"ecosystem_logo\", \"member_id\": #key_id#}).Vars(logo)\n    SetVar(edit_info_logo,#logo_value_binary_id#)\n}.ElseIf(#buffered#==1){\n    SetVar(edit_info_logo,#buffer_value_logo#)\n}\nIf(And(#buffered#==1,#buffer_value_switch#==\"true\")){\n    SetVar(edit_info_conditions,#buffer_value_conditions#)\n    SetVar(edit_info_hardware,#buffer_value_hardware#)\n    SetVar(edit_info_email,#buffer_value_email#)\n    SetVar(edit_info_phone,#buffer_value_phone#)\n    SetVar(edit_info_vde_page,#buffer_value_vde_page#)\n    SetVar(edit_info_vde_form,#buffer_value_vde_form#)\n    SetVar(edit_info_web_page,#buffer_value_web_page#)\n    SetVar(edit_info_web_form,#buffer_value_web_form#)\n}\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_visibility, Source: src_visibility)\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_type, Source: src_type)\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_payment, Source: src_payment)\nAppParam(Ecosystem: 1, App: #application_id#, Name: ec_option, Source: src_option)\nForm(){\n    Div(row){\n        Div(col-sm-4 mt-sm text-right){\n            Label(){\n                LangRes(@1ecosystem)\n            }\n            Span(Class: text-danger, Body:*)\n        }\n        Div(col-sm-8){\n            Input(Name: Id, Type: hidden, Value: #edit_id#)\n            If(GetVar(edit_page_id)){\n                Input(Name: Name, Value: #edit_name#, Disabled: true)\n            }.Else{\n                Div(input-group){\n                    If(#edit_id#==1){\n                        Input(Name: Name, Value: $@1ecosystem_select$, Disabled: true)\n                    }.Else{\n                        Input(Name: Name, Value: #edit_name#, Disabled: true)\n                    }\n                    Div(input-group-btn){\n                        Button(Class: btn bg-gray-lighter fa fa-caret-down buttons, Page: @1select_ecosystem, PageParams:\"back_page=@1ec_manage,back_header=$@1catalog_ecosystems_editing$,EcosystemId=#edit_id#,Type=ONLY_MY\").Popup(Header: $@1ecosystem$, Width: \"40\")\n                    }.Style(\n                        .buttons {\n                            border: 1px solid #dde6e9;\n                            padding: 6px 16px;\n                        }\n                    )\n                }\n            }\n        }\n    }\n    Div(row mt-sm){\n        Div(col-sm-4 mt-sm text-right){\n            Label(){\n                LangRes(@1catalog_ecosystems_visibility)\n            }\n            Span(Class: text-danger, Body:*)\n        }\n        Div(col-sm-8){\n            If(GetVar(edit_info_description)){\n                Select(Name: Visibility, Source: src_visibility, NameColumn: name, ValueColumn: id, Value: #edit_info_description#)\n            }.Else{\n                Select(Name: Visibility, Source: src_visibility, NameColumn: name, ValueColumn: id, Value: 2)\n            }\n        }\n    }\n\n    Div(row mt-sm){\n        Div(col-sm-4 mt-sm text-right){\n            Label(){\n                LangRes(@1jurisdiction)\n            }\n            Span(Class: text-danger, Body:*)\n        }\n        Div(col-sm-8){\n            If(GetVar(edit_info_status_options)){\n                Select(Name: Status_options, Source: src_option, NameColumn: name, ValueColumn: id, Value: #edit_info_status_options#)\n            }.Else{\n                Select(Name: Status_options, Source: src_option, NameColumn: name, ValueColumn: id)\n            }\n        }\n    }\n\n    Div(row mt-sm){\n        Div(col-sm-4 mt-sm text-right){\n            Label(){\n                LangRes(@1catalog_ecosystems_type)\n            }\n            Span(Class: text-danger, Body:*)\n        }\n        Div(col-sm-8){\n            If(GetVar(edit_info_type)){\n                Select(Name: Type, Source: src_type, NameColumn: name, ValueColumn: id, Value: #edit_info_type#)\n            }.Else{\n                Select(Name: Type, Source: src_type, NameColumn: name, ValueColumn: id)\n            }\n        }\n    }\n    Div(row mt-sm){\n        Div(col-sm-4 mt-sm text-right){\n            Label(){\n                LangRes(@1catalog_ecosystems_payment)\n            }\n            Span(Class: text-danger, Body:*)\n        }\n        Div(col-sm-8){\n            If(#edit_info_status_options#==3){\n                If(GetVar(edit_info_payment)){\n                Select(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: id, Value: #edit_info_payment#)\n                }.Else{\n                Select(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: id)\n                }\n            }.ElseIf(#edit_info_status_options#==2){\n                Select(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: #edit_info_payment#, Value: 1)\n            }.ElseIf(#edit_info_status_options#==1){\n                Select(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: #edit_info_payment#, Value: 1)\n            }.Else{\n                Select(Name: Payment, Source: src_payment, NameColumn: name, ValueColumn: #edit_info_payment#, Value: 1)\n            }\n        }\n    }\n    Div(row mt-sm){\n        Div(col-sm-4 mt-sm text-right){\n            Label(){\n                LangRes(@1catalog_ecosystems_description)\n            }\n        }\n        Div(col-sm-8){\n            If(GetVar(edit_info_description)){\n                Input(Name: Description, Type: textarea, Class: rv, Value: #edit_info_description#)\n            }.Else{\n                Input(Name: Description, Type: textarea, Class: rv)\n            }\n        }\n    }\n    Div(row mt-sm){\n        Div(col-sm-4 text-right){\n            Span(Class: text-bold vc){\n                LangRes(@1catalog_ecosystems_logo)\n            }\n        }\n        Div(ml-lg pull-left){\n            If(#edit_id#!=1){\n                If(#edit_info_logo#>0){\n                    Input(Name: Logo, Type: hidden, Value: #edit_info_logo#)\n                    Image(Src: Binary().ById(#edit_info_logo#)).Style(height: 36px;)\n                }.Else{\n                    Input(Name: Logo, Type: hidden, Value: 0)\n                    Span(Class: fa icon-layers fa-2x vc)\n                }\n            }.Else{\n                Span(Class: fa icon-layers fa-2x vc)\n            }\n        }\n        Div(ml pull-left){\n            If(#edit_id#!=1){\n                SetVar(ParamNames, \"id;visibility;type;payment;description;logo;switch;conditions;hardware;email;phone;vde_page;vde_form;web_page;web_form,status_options\")\n                Button(Class: btn btn-default btn-upload, Page: @1upload_page, PageParams: \"back_page=@1ec_manage,back_page_popup=50,back_page_popup_header=$@1catalog_ecosystems_editing$,app_id=#application_id#,buffer_key=ecosystem_logo\", Contract: @1FormStateSave, Params: \"AppId=#application_id#,FormName=ecosystem_catalog_manage_form,ParamNames=#ParamNames#,Param1=Val(Id),Param2=Val(Visibility),Param3=Val(Type),Param4=Val(Payment),Param5=Val(Description),Param6=Val(Logo),Param7=Val(Switch),Param8=Val(Conditions),Param9=Val(Hardware),Param10=Val(Email),Param11=Val(Phone),Param12=Val(Vde_page),Param13=Val(Vde_form),Param14=Val(Web_page),Param15=Val(Web_form),Param16=Val(Status_options)\"){\n                    Span(Class: h6, Body: $@1button_upload$)\n                }.Popup(Header: $@1catalog_ecosystems_logo$, Width: 30)\n            }\n        }\n        Div(mr pull-right){\n            If(And(#buffered#==1,#buffer_value_switch#==\"true\")){\n                Div(input-group){\n                    Span(Class: mr vc text-muted, Body: $@1additional_info_edit$)\n                    Div(input-group-btn){\n                        Input(Name: Switch, Type: \"checkbox\", Value: \"true\", Class: m0)\n                    }\n                }\n            }.Else{\n                Div(input-group){\n                    Span(Class: mr vc text-muted, Body: $@1additional_info_edit$)\n                    Div(input-group-btn){\n                        Input(Name: Switch, Type: \"checkbox\", Value: \"false\", Class: m0)\n                    }\n                }\n            }\n        }\n    }.Style(\n        .vc {line-height: 36px;}\n        .btn-upload {\n            padding: 1px 6px;\n            margin-top: 7px;\n            border-radius: 3px;\n        }\n    )\n    Div(){\n        Div(row mt-sm){\n            Div(col-sm-4 mt-sm text-right){\n                Label(){\n                    LangRes(@1catalog_ecosystems_conditions)\n                }\n            }\n            Div(col-sm-8){\n                If(GetVar(edit_info_conditions)){\n                    Input(Name: Conditions, Type: textarea, Class: rv, Value: #edit_info_conditions#)\n                }.Else{\n                    Input(Name: Conditions, Type: textarea, Class: rv)\n                }\n            }\n        }\n        Div(row mt-sm){\n            Div(col-sm-4 mt-sm text-right){\n                Label(){\n                    LangRes(@1catalog_ecosystems_hardware)\n                }\n            }\n            Div(col-sm-8){\n                If(GetVar(edit_info_hardware)){\n                    Input(Name: Hardware, Type: textarea, Class: rv, Value: #edit_info_hardware#)\n                }.Else{\n                    Input(Name: Hardware, Type: textarea, Class: rv)\n                }\n            }\n        }\n        Div(row mt-sm){\n            Div(col-sm-4 mt-sm text-right){\n                Label(){\n                    LangRes(@1catalog_ecosystems_email)\n                }\n            }\n            Div(col-sm-8){\n                If(GetVar(edit_info_email)){\n                    Input(Name: Email, Value: #edit_info_email#)\n                }.Else{\n                    Input(Name: Email)\n                }\n            }\n        }\n        Div(row mt-sm){\n            Div(col-sm-4 mt-sm text-right){\n                Label(){\n                    LangRes(@1catalog_ecosystems_phone)\n                }\n            }\n            Div(col-sm-8){\n                If(GetVar(edit_info_phone)){\n                    Input(Name: Phone, Value: #edit_info_phone#)\n                }.Else{\n                    Input(Name: Phone)\n                }\n            }\n        }\n        Div(row mt-sm){\n            Div(col-sm-4 mt-sm text-right){\n                Label(){\n                    LangRes(@1vde_page_address)\n                }\n            }\n            Div(col-sm-8){\n                If(GetVar(edit_info_vde_page)){\n                    Input(Name: Vde_page, Value: #edit_info_vde_page#)\n                }.Else{\n                    Input(Name: Vde_page)\n                }\n            }\n        }\n        Div(row mt-sm){\n            Div(col-sm-4 mt-sm text-right){\n                Label(){\n                    LangRes(@1vde_form_address)\n                }\n            }\n            Div(col-sm-8){\n                If(GetVar(edit_info_vde_form)){\n                    Input(Name: Vde_form, Value: #edit_info_vde_form#)\n                }.Else{\n                    Input(Name: Vde_form)\n                }\n                Div(Class: m0 h6 text-muted, Body: $@1vde_form_desc$)\n            }\n        }\n        Div(row mt-sm){\n            Div(col-sm-4 mt-sm text-right){\n                Label(){\n                    LangRes(@1web_page_address)\n                }\n            }\n            Div(col-sm-8){\n                If(GetVar(edit_info_web_page)){\n                    Input(Name: Web_page, Value: #edit_info_web_page#)\n                }.Else{\n                    Input(Name: Web_page)\n                }\n            }\n        }\n        Div(row mt-sm){\n            Div(col-sm-4 mt-sm text-right){\n                Label(){\n                    LangRes(@1web_form_address)\n                }\n            }\n            Div(col-sm-8){\n                If(GetVar(edit_info_web_form)){\n                    Input(Name: Web_form, Value: #edit_info_web_form#)\n                }.Else{\n                    Input(Name: Web_form)\n                }\n                Div(Class: m0 h6 text-muted, Body: $@1web_form_desc$)\n            }\n        }\n    }.Show(\"Switch=true\")\n    \n    If(#edit_id#==1){\n        Button(Body: LangRes(@1save), Class: btn btn-primary pull-right mt-lg disabled)\n    }.Else{\n        Div(){\n            Button(Body: LangRes(@1save), Class: btn btn-primary pull-right mt-lg, Contract: @1EcManageInfo, Page: @1ec_list)\n        }.Show(\"Switch=true\")\n        Div(){\n            Button(Body: LangRes(@1save), Class: btn btn-primary pull-right mt-lg, Contract: @1EcManageInfo, Params:\"Conditions=#edit_info_conditions#,Email=#edit_info_email#,Phone=#edit_info_phone#,Hardware=#edit_info_hardware#,Vde_page=#edit_info_vde_page#,Vde_form=#edit_info_vde_form#,Web_page=#edit_info_web_page#,Web_form=#edit_info_web_form#\", Page: @1ec_list)\n        }.Show(\"Switch=false\")\n    }\n    Button(Body: LangRes(@1back), Class: btn btn-default pull-right mt-lg, Page: @1ec_list)\n}.Style(\n    .rv {resize: vertical;}\n)",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "ec_new",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "DBFind(@1system_parameters).Where({name: \"price_create_ecosystem\"}).Columns(\"value\").Vars(price)\n\nForm(){\n    Div(row){\n        Div(col-sm-3 mt-sm text-right){\n            Label(){\n                LangRes(@1name)\n            }\n            Span(Class: text-danger, Body:*)\n        }\n        Div(col-sm-9){\n            Input(Placeholder: $@1ecosystem_name$, Name:Name)\n        }\n    }\n    Button(Body: LangRes(@1create), Class: btn btn-primary pull-right mt, Contract: @1NewEcosystem).Alert(Text: \"$@1create_ecosystem_price$#price_value#GAC。$@1create_ecosystem_price_exit$\", ConfirmButton: $@1yes$, CancelButton: $@1no$, Icon: question)\n    Button(Body: LangRes(@1back), Class: btn btn-default pull-right mt, Page: @1ec_list)\n}",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "ec_preview",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "DBFind(@1applications).Where({ecosystem:1, name:\"Ecosystems catalog\"}).Columns(\"name,id\").Vars(application)\nDBFind(@1ecosystems).Where({\"id\": #view_page_id#}).Columns(\"id,name,info->type,info->payment,info->logo,info->description,info->conditions,info->email,info->phone,info->hardware,info->vde_page,info->vde_form,info->web_page,info->web_form\").Vars(preview)\nForm(){\n    If(#view_page_id#>0){\n        Div(row){\n            Div(col-sm-4){\n                Div(text-center){\n                    If(#preview_info_logo#>0){\n                        Image(Src: Binary().ById(#preview_info_logo#)).Style(height: 70px;)\n                    }.Else{\n                        Span(Class: fa icon-layers fa-5x text-default)\n                    }\n                    Div(Class: text-bold h4 mt0 mb-sm, Body: #preview_name#)\n                }\n            }\n            Div(col-sm-8 m0){\n                Span(Class: text-bold, Body: LangRes(@1catalog_ecosystems_description))\n                If(#preview_info_description#!=\"\"){\n                    Div(Body: #preview_info_description#)\n                }.Else{\n                    Div(Body: $@1catalog_ecosystems_description_empty$)\n                }\n                Div(mt-sm mb-sm){\n                    If(#preview_info_type#!=\"\"){\n                        Span(Class: label label-default label-dark mr-sm){\n                            If(#preview_info_type#==1){\n                                Em(Class: fa fa-users mr-sm)\n                            }.ElseIf(#preview_info_type#==2){\n                                Em(Class: fa fa-handshake-o mr-sm)\n                            }.ElseIf(#preview_info_type#==3){\n                                Em(Class: fa fa-bank mr-sm)\n                            }\n                            AppParam(Ecosystem: 1, App: #application_id#, Name: ec_type, Index: #preview_info_type#)\n                        }\n                    }\n                    If(#preview_info_payment#!=\"\"){\n                        Span(Class: label label-default label-dark){\n                            If(#preview_info_payment#==1){\n                                Em(Class: fa fa-gift mr-sm)\n                            }.ElseIf(#preview_info_payment#==2){\n                                Em(Class: fa fa-usd mr-sm)\n                            }\n                            AppParam(Ecosystem: 1, App: #application_id#, Name: ec_payment, Index: #preview_info_payment#)\n                        }\n                    }\n                }\n            }.Style(\n                .label-dark {\n                    color:#515253;\n                    font-size: 12px;\n                    font-weight: normal;\n                }\n            )\n        }\n        If(Or(#preview_info_conditions#!=\"\",#preview_info_hardware#!=\"\")){\n            Div(list-group-item mt-sm){\n                If(#preview_info_conditions#!=\"\"){\n                    Div(row mt-sm){\n                        Div(col-sm-4 text-right){\n                            Label(){\n                                LangRes(@1catalog_ecosystems_conditions)\n                            }\n                        }\n                        Div(col-sm-8){\n                            Span(Body: #preview_info_conditions#)\n                        }\n                    }\n                }\n                If(#preview_info_hardware#!=\"\"){\n                    Div(row mt-sm){\n                        Div(col-sm-4 text-right){\n                            Label(){\n                                LangRes(@1catalog_ecosystems_hardware)\n                            }\n                        }\n                        Div(col-sm-8){\n                            Span(Body: #preview_info_hardware#)\n                        }\n                    }\n                }\n            }\n        }\n        If(Or(#preview_info_email#!=\"\",#preview_info_phone#!=\"\")){\n            Div(list-group-item mt-sm){\n                If(#preview_info_email#!=\"\"){\n                    Div(row mt-sm){\n                        Div(col-sm-4 text-right){\n                            Label(){\n                                LangRes(@1catalog_ecosystems_email)\n                            }\n                        }\n                        Div(col-sm-8){\n                            Span(Body: #preview_info_email#)\n                        }\n                    }\n                }\n                If(#preview_info_phone#!=\"\"){\n                    Div(row mt-sm){\n                        Div(col-sm-4 text-right){\n                            Label(){\n                                LangRes(@1catalog_ecosystems_phone)\n                            }\n                        }\n                        Div(col-sm-8){\n                            Span(Body: #preview_info_phone#)\n                        }\n                    }\n                }\n            }\n        }\n        If(Or(#preview_info_vde_page#!=\"\",#preview_info_vde_form#!=\"\",#preview_info_web_page#!=\"\",#preview_info_web_form#!=\"\")){\n            Div(list-group-item mt-sm){\n                If(#preview_info_vde_page#!=\"\"){\n                    Div(row mt-sm){\n                        Div(col-sm-4 text-right){\n                            Label(){\n                                LangRes(@1vde_page_address)\n                            }\n                        }\n                        Div(col-sm-8){\n                            Span(Body: #preview_info_vde_page#)\n                        }\n                    }\n                }\n                If(#preview_info_vde_form#!=\"\"){\n                    Div(row mt-sm){\n                        Div(col-sm-4 text-right){\n                            Label(){\n                                LangRes(@1vde_form_address)\n                            }\n                        }\n                        Div(col-sm-8){\n                            Span(Body: #preview_info_vde_form#)\n                        }\n                    }\n                }\n                If(#preview_info_web_page#!=\"\"){\n                    Div(row mt-sm){\n                        Div(col-sm-4 text-right){\n                            Label(){\n                                LangRes(@1web_page_address)\n                            }\n                        }\n                        Div(col-sm-8){\n                            Span(Body: #preview_info_web_page#)\n                        }\n                    }\n                }\n                If(#preview_info_web_form#!=\"\"){\n                    Div(row mt-sm){\n                        Div(col-sm-4 text-right){\n                            Label(){\n                                LangRes(@1web_form_address)\n                            }\n                        }\n                        Div(col-sm-8){\n                            Span(Body: #preview_info_web_form#)\n                        }\n                    }\n                }\n            }\n        }\n    }\n    If(GetVar(search)==\"\"){\n        SetVar(search,)\n    }\n    Button(Body: LangRes(@1back), Class: btn btn-default pull-right mt, Page: @1ec_list, PageParams: \"sort=#sort#,page_par=#page_par#,search=#search#,current_page=#current_page#\")\n}",
            "Menu": "default_menu",
            "Type": "pages"
        },
        {
            "Name": "EcManageInfo",
            "Conditions": "ContractConditions(\"@1DeveloperCondition\")",
            "Value": "contract EcManageInfo {\n    data {\n        Id int\n        Visibility int\n        Type int\n        Payment int\n        Logo int \"optional\"\n        Description string \"optional\"\n        Conditions string \"optional\"\n        Email string \"optional\"\n        Phone string \"optional\"\n        Hardware string \"optional\"\n        Vde_page string \"optional\"\n        Vde_form string \"optional\"\n        Web_page string \"optional\"\n        Web_form string \"optional\"\n        Status_options int \"optional\"\n    }\n    \n    conditions {\n        var access map\n        access = DBFind(\"@1parameters\").Where({\"$and\": [{\"ecosystem\": $Id}, {\"$or\": [{\"$and\": [{\"name\": \"founder_account\"},{\"value\": $key_id}]},{\"$and\": [{\"name\": \"delegate_account\"},{\"value\": $key_id}]}]}]}).Row()\n        if !access {\n            warning LangRes(\"@1ecosystem_cannot_manage_info\", \"en\")\n        }\n    }\n\n    action {\n        var ecosystem_info map\n        ecosystem_info[\"visibility\"] = $Visibility\n        ecosystem_info[\"type\"] = $Type\n        ecosystem_info[\"payment\"] = $Payment\n        ecosystem_info[\"logo\"] = $Logo\n        ecosystem_info[\"description\"] = $Description\n        ecosystem_info[\"conditions\"] = $Conditions\n        ecosystem_info[\"email\"] = $Email\n        ecosystem_info[\"phone\"] = $Phone\n        ecosystem_info[\"hardware\"] = $Hardware\n        ecosystem_info[\"vde_page\"] = $Vde_page\n        ecosystem_info[\"vde_form\"] = $Vde_form\n        ecosystem_info[\"web_page\"] = $Web_page\n        ecosystem_info[\"web_form\"] = $Web_form\n        ecosystem_info[\"status_options\"] = $Status_options  \n        DBUpdate(\"@1ecosystems\", $Id, {\"info\": ecosystem_info})\n    }\n}",
            "Type": "contracts"
        },
        {
            "Name": "EcosystemOpen",
            "Conditions": "true",
            "Value": "contract EcosystemOpen {\n    data {\n        ecosystem_num int\n     }\n    conditions {\n      \n    }\n\n    action {\n        var pub string\n        pub = DBFind(\"@1keys\").Where({ecosystem:1, id:$key_id}).One(\"pub\") \n        DBInsert(\"@1keys\", {id:$key_id, pub:pub, ecosystem:$ecosystem_num})\n    }\n}",
            "Type": "contracts"
        }
    ]
}